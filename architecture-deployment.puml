
@startuml IKT300_Deployment
skinparam shadowing false
skinparam nodeMargin 15
skinparam packageStyle rectangle
left to right direction

actor Operator

node "Developer Workstation" <<device>> as Workstation {
  artifact "kernelconfig.json" <<artifact>> as ConfigFile
}

node "Host Machine" <<device>> as Host {
  frame "Microkernel Runtime" {
    node "Kernel Process\n(IKT300.Microkernel)" <<executionEnvironment>> as KernelProc {
      artifact "Logs" <<artifact>> as KernelLogs
      artifact "Heartbeat Log" <<artifact>> as HeartbeatLog
    }

    node "Plugin Process\n(EventSimulator)" <<executionEnvironment>> as EventSimProc {
      artifact "Simulated Events" <<artifact>> as SimEvents
    }

    node "Plugin Process\n(MetricLogger)" <<executionEnvironment>> as MetricLoggerProc {
      artifact "metriclogger-metrics.log" <<artifact>> as MetricsLog
    }

    node "Message Bus / TCP Listener" <<executionEnvironment>> as Transport
  }
}

Operator --> Workstation : edit config\nlaunch scripts
Workstation --> Host : deploy binaries & config
Operator --> Host : CLI commands

ConfigFile --> KernelProc : load on startup
KernelProc --> Transport : listen(configuredPort)
EventSimProc --> Transport : TCP client connection
KernelProc --> EventSimProc : broadcast messages
MetricLoggerProc --> Transport : TCP client connection
KernelProc --> MetricLoggerProc : broadcast messages
MetricLoggerProc --> MetricsLog : append metrics
KernelProc --> HeartbeatLog : append heartbeats
KernelProc --> KernelLogs : operational logs

@enduml
